{"version":3,"sources":["webpack://docs/./src/api/index.js","webpack://docs/./src/views/news/ListContent.vue?a73c","webpack://docs/src/views/news/ListContent.vue","webpack://docs/./src/views/news/ListContent.vue?2f08","webpack://docs/./src/views/news/ListContent.vue","webpack://docs/./src/views/news/ListContent.vue?34c4"],"names":["fetchTipsRecord","params","request","url","method","updateTipsStatus","info","data","previewTipsInfo","saveTipsInfo","fetchModifyTipsInfo","id","deleteTip","topTipsStatus","render","_vm","this","_h","$createElement","_c","_self","attrs","fields","on","handleSubmit","staticStyle","toEditor","_v","index","columns","tableData","loading","pagination","handleTableChange","scopedSlots","_u","key","fn","_","record","$event","toppingRecoder","_s","tstatus","modifyRecoder","actionRecoder","pstatus","staticClass","deleteRecoder","text","staticRenderFns","components","TableSearch","name","setup","lang","total","current","pageSize","pageSizeOptions","showQuickJumper","showSizeChanger","getParams","currentPage","title","value","mediaType","languageType","e","root","$router","push","content","onOk","topStatus","component"],"mappings":"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","file":"js/chunk-08290e5a.126416e7.js","sourcesContent":["import request from '@/utils/request';\n\nexport function fetchTipsRecord(params) {\n  return request({\n    url: 'official/iportal/media/news/record',\n    params,\n    method: 'GET',\n  });\n}\n\nexport function updateTipsStatus(info) {\n  return request({\n    url: 'official/iportal/media/news/change',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function previewTipsInfo(info) {\n  return request({\n    url: 'official/iportal/media/news/preview',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function saveTipsInfo(info) {\n  return request({\n    url: 'official/iportal/media/news/save',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function fetchModifyTipsInfo(id) {\n  return request({\n    url: 'official/iportal/media/news/edit/' + id,\n    method: 'get',\n  });\n}\n\nexport function deleteTip(id) {\n  return request({\n    url: 'official/iportal/media/news/del/' + id,\n    method: 'get',\n  });\n}\n\nexport function topTipsStatus(info) {\n  return request({\n    url: 'official/iportal/top',\n    data: info,\n    method: 'POST',\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{attrs:{\"bordered\":false}},[_c('table-search',{attrs:{\"fields\":_vm.fields},on:{\"submit\":_vm.handleSubmit}},[_c('a-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"24px\",\"margin-top\":\"6px\"},on:{\"click\":_vm.toEditor}},[_vm._v(\"添加新闻 \")])],1),_c('a-table',{attrs:{\"size\":\"default\",\"rowKey\":function (data, index) { return index; },\"columns\":_vm.columns,\"dataSource\":_vm.tableData,\"loading\":_vm.loading,\"pagination\":_vm.pagination},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"action\",fn:function(_, record){return [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.toppingRecoder(record)}}},[_vm._v(\" \"+_vm._s(record.tstatus === 1 ? '取消置顶' : '置顶')+\" \")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.modifyRecoder(record)}}},[_vm._v(\" 编辑 \")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.actionRecoder(record)}}},[_vm._v(\" \"+_vm._s(record.pstatus === 1 ? '下线' : '发布')+\" \")]),_c('a-button',{staticClass:\"danger\",attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.deleteRecoder(record)}}},[_vm._v(\" 删除 \")])]}},{key:\"pstatus\",fn:function(text){return [(text == 0)?_c('span',{staticClass:\"is-end\"},[_vm._v(\"未发布\")]):(text == 1)?_c('span',{staticClass:\"is-info\"},[_vm._v(\"已发布\")]):_c('span',{staticClass:\"is-no\"},[_vm._v(\"已更新\")])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-card :bordered=\"false\">\n    <table-search :fields=\"fields\" @submit=\"handleSubmit\">\n      <a-button style=\"float:right; margin-right: 24px;margin-top:6px\" @click=\"toEditor\">添加新闻\n      </a-button>\n    </table-search>\n    <a-table size=\"default\" :rowKey=\"(data, index) => index\" :columns=\"columns\"\n      :dataSource=\"tableData\" :loading=\"loading\" :pagination=\"pagination\"\n      @change=\"handleTableChange\">\n      <template slot=\"action\" slot-scope=\"_, record\">\n        <a-button type=\"link\" @click=\"toppingRecoder(record)\">\n          {{ record.tstatus === 1 ? '取消置顶' : '置顶' }}\n        </a-button>\n        <a-button type=\"link\" @click=\"modifyRecoder(record)\">\n          编辑\n        </a-button>\n        <a-button type=\"link\" @click=\"actionRecoder(record)\">\n          {{ record.pstatus === 1 ? '下线' : '发布' }}\n        </a-button>\n        <a-button type=\"link\" class=\"danger\" @click=\"deleteRecoder(record)\">\n          删除\n        </a-button>\n      </template>\n      <template slot=\"pstatus\" slot-scope=\"text\">\n        <span class=\"is-end\" v-if=\"text == 0\">未发布</span>\n        <span class=\"is-info\" v-else-if=\"text == 1\">已发布</span>\n        <span class=\"is-no\" v-else>已更新</span>\n      </template>\n    </a-table>\n  </a-card>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { TableSearch } from '@jg/via-ui';\nimport { reactive, toRefs, onMounted, watch } from '@vue/composition-api';\nimport { fetchTipsRecord, updateTipsStatus, topTipsStatus, deleteTip } from '@/api/index';\nimport { Modal, message } from 'ant-design-vue';\n\nconst columns = [\n  {\n    title: '新闻标题',\n    dataIndex: 'title',\n  },\n  {\n    title: '创建日期',\n    dataIndex: 'ctime',\n    customRender: text => moment(text).format('YYYY-MM-DD HH:mm:ss'),\n  },\n  {\n    title: '创建者',\n    dataIndex: 'creator',\n  },\n  {\n    title: '状态',\n    dataIndex: 'pstatus',\n    width: '100px',\n    scopedSlots: { customRender: 'pstatus' },\n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    align: 'center',\n    maxWidth: '300px',\n    scopedSlots: { customRender: 'action' },\n  },\n];\n\nexport default {\n  components: {\n    TableSearch,\n  },\n  name: 'tips-list-content',\n  setup(_, { root }) {\n    const data = reactive({\n      lang: 'zh',\n      fields: [\n        {\n          label: '查询条件',\n          type: 'input',\n          field: 'title',\n          value: '',\n          placeholder: '请输入新闻标题',\n        },\n      ],\n      tableData: [],\n      columns,\n      loading: true,\n      pagination: {\n        total: 0,\n        current: 1,\n        pageSize: 20,\n        pageSizeOptions: ['5', '10', '20', '50', '100'],\n        showQuickJumper: false,\n        showSizeChanger: true,\n      },\n    });\n\n    watch(\n      () => root.$route.path,\n      newVal => {\n        data.lang = newVal.endsWith('/zh') ? 'zh' : 'en';\n        data.pagination.current = 1;\n        request();\n      },\n    );\n\n    function getParams() {\n      const params = {};\n      params.currentPage = data.pagination.current;\n      params.pageSize = data.pagination.pageSize;\n      params.title = data.fields[0].value;\n      params.mediaType = 'NEWS';\n      params.languageType = data.lang === 'zh' ? 'CHINESE' : 'ENGLISH';\n      return params;\n    }\n\n    function request() {\n      const params = getParams();\n      data.loading = true;\n      fetchTipsRecord(params)\n        .then(res => {\n          if (res.list) {\n            data.tableData = res.list;\n            data.pagination.total = res.total;\n          }\n        })\n        .finally(() => {\n          data.loading = false;\n        });\n    }\n\n    function handleSubmit() {\n      data.pagination.current = 1;\n      request();\n    }\n\n    function handleTableChange(e) {\n      data.pagination = e;\n      request();\n    }\n\n    function modifyRecoder(record) {\n      root.$router.push({\n        name: 'docs-news-edit',\n        params: {\n          id: record.id,\n          lang: data.lang,\n        },\n      });\n    }\n    function toEditor() {\n      root.$router.push({\n        name: 'docs-news-create',\n        params: {\n          lang: data.lang,\n        },\n      });\n    }\n    function actionRecoder(record) {\n      const pstatus = record.pstatus === 0 ? 1 : 0;\n      Modal.confirm({\n        title: '提示',\n        content: `确认${pstatus === 1 ? '发布' : '下线'}该新闻吗?`,\n        onOk() {\n          return updateTipsStatus({\n            pstatus,\n            id: record.id,\n          }).then(() => {\n            message.success(`${pstatus === 1 ? '发布' : '下线'}成功`);\n            request();\n          });\n        },\n      });\n    }\n\n    function toppingRecoder(record) {\n      const topStatus = record.topStatus === 0 ? 1 : 0;\n      Modal.confirm({\n        title: '提示',\n        content: `确认${topStatus === 1 ? '置顶' : '取消置顶'}该新闻吗?`,\n        onOk() {\n          return topTipsStatus({\n            topStatus,\n            id: record.id,\n          }).then(() => {\n            message.success(`${topStatus === 1 ? '置顶' : '取消置顶'}成功`);\n            request();\n          });\n        },\n      });\n    }\n\n    function deleteRecoder(record) {\n      Modal.confirm({\n        title: '提示',\n        content: '确认删除该新闻吗?',\n        onOk() {\n          return deleteTip(record.id).then(() => {\n            message.success('删除成功');\n            request();\n          });\n        },\n      });\n    }\n    onMounted(() => {\n      request();\n    });\n\n    return {\n      ...toRefs(data),\n      handleSubmit,\n      handleTableChange,\n      modifyRecoder,\n      actionRecoder,\n      deleteRecoder,\n      toppingRecoder,\n      toEditor,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.is-info,\n.id-end,\n.is-no {\n  &::before {\n    content: '';\n    border-radius: 50%;\n    width: 4px;\n    height: 4px;\n    display: inline-block;\n    margin-right: 2px;\n    transform: translateY(-2px);\n    background: currentColor;\n  }\n}\n.is-info {\n  color: @success-color;\n}\n.is-end {\n  color: @disabled-color;\n}\n.is-no {\n  color: @warning-color;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListContent.vue?vue&type=template&id=bdf3ffc6&scoped=true&\"\nimport script from \"./ListContent.vue?vue&type=script&lang=js&\"\nexport * from \"./ListContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListContent.vue?vue&type=style&index=0&id=bdf3ffc6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdf3ffc6\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=style&index=0&id=bdf3ffc6&lang=less&scoped=true&\""],"sourceRoot":""}