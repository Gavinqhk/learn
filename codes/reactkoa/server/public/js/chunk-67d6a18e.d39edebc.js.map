{"version":3,"sources":["webpack://docs/./src/views/tips/ListContent.vue?0521","webpack://docs/src/views/tips/ListContent.vue","webpack://docs/./src/views/tips/ListContent.vue?b3c5","webpack://docs/./src/views/tips/ListContent.vue","webpack://docs/./src/api/index.js","webpack://docs/./src/views/tips/ListContent.vue?1558"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fields","on","handleSubmit","staticStyle","toEditor","_v","data","index","columns","tableData","loading","pagination","handleTableChange","scopedSlots","_u","key","fn","_","record","$event","toppingRecoder","_s","topStatus","modifyRecoder","actionRecoder","pstatus","staticClass","deleteRecoder","text","staticRenderFns","components","TableSearch","name","setup","lang","total","current","pageSize","pageSizeOptions","showQuickJumper","showSizeChanger","getParams","params","currentPage","title","value","mediaType","languageType","request","e","root","$router","push","id","content","onOk","component","fetchTipsRecord","url","method","updateTipsStatus","info","previewTipsInfo","saveTipsInfo","fetchModifyTipsInfo","deleteTip","topTipsStatus"],"mappings":"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","file":"js/chunk-67d6a18e.d39edebc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{attrs:{\"bordered\":false}},[_c('table-search',{attrs:{\"fields\":_vm.fields},on:{\"submit\":_vm.handleSubmit}},[_c('a-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"24px\",\"margin-top\":\"6px\"},on:{\"click\":_vm.toEditor}},[_vm._v(\" 创建文章 \")])],1),_c('a-table',{attrs:{\"size\":\"default\",\"rowKey\":function (data, index) { return index; },\"columns\":_vm.columns,\"dataSource\":_vm.tableData,\"loading\":_vm.loading,\"pagination\":_vm.pagination},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"action\",fn:function(_, record){return [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.toppingRecoder(record)}}},[_vm._v(\" \"+_vm._s(record.topStatus === 1 ? '取消置顶' : '置顶')+\" \")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.modifyRecoder(record)}}},[_vm._v(\" 编辑 \")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.actionRecoder(record)}}},[_vm._v(\" \"+_vm._s(record.pstatus === 1 ? '下线' : '发布')+\" \")]),_c('a-button',{staticClass:\"danger\",attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.deleteRecoder(record)}}},[_vm._v(\" 删除 \")])]}},{key:\"pstatus\",fn:function(text){return [(text == 0)?_c('span',{staticClass:\"is-end\"},[_vm._v(\"未发布\")]):(text == 1)?_c('span',{staticClass:\"is-info\"},[_vm._v(\"已发布\")]):_c('span',{staticClass:\"is-no\"},[_vm._v(\"已更新\")])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a-card :bordered=\"false\">\n    <table-search :fields=\"fields\" @submit=\"handleSubmit\">\n      <a-button style=\"float:right; margin-right: 24px;margin-top:6px\" @click=\"toEditor\">\n        创建文章\n      </a-button>\n    </table-search>\n    <a-table size=\"default\" :rowKey=\"(data, index) => index\" :columns=\"columns\"\n      :dataSource=\"tableData\" :loading=\"loading\" :pagination=\"pagination\"\n      @change=\"handleTableChange\">\n      <template slot=\"action\" slot-scope=\"_, record\">\n        <a-button type=\"link\" @click=\"toppingRecoder(record)\">\n          {{ record.topStatus === 1 ? '取消置顶' : '置顶' }}\n        </a-button>\n        <a-button type=\"link\" @click=\"modifyRecoder(record)\">\n          编辑\n        </a-button>\n        <a-button type=\"link\" @click=\"actionRecoder(record)\">\n          {{ record.pstatus === 1 ? '下线' : '发布' }}\n        </a-button>\n        <a-button type=\"link\" class=\"danger\" @click=\"deleteRecoder(record)\">\n          删除\n        </a-button>\n      </template>\n      <template slot=\"pstatus\" slot-scope=\"text\">\n        <span class=\"is-end\" v-if=\"text == 0\">未发布</span>\n        <span class=\"is-info\" v-else-if=\"text == 1\">已发布</span>\n        <span class=\"is-no\" v-else>已更新</span>\n      </template>\n    </a-table>\n  </a-card>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { TableSearch } from '@jg/via-ui';\nimport { reactive, toRefs, onMounted, watch } from '@vue/composition-api';\nimport { fetchTipsRecord, updateTipsStatus, topTipsStatus, deleteTip } from '@/api/index';\nimport { message, Modal } from 'ant-design-vue';\n\nconst columns = [\n  {\n    title: '文章标题',\n    dataIndex: 'title',\n  },\n  {\n    title: '创建日期',\n    dataIndex: 'ctime',\n    customRender: text => moment(text).format('YYYY-MM-DD HH:mm:ss'),\n  },\n  {\n    title: '创建者',\n    dataIndex: 'creator',\n  },\n  {\n    title: '状态',\n    dataIndex: 'pstatus',\n    width: '100px',\n    scopedSlots: { customRender: 'pstatus' },\n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    width: '280px',\n    align: 'center',\n    scopedSlots: { customRender: 'action' },\n  },\n];\n\nexport default {\n  components: {\n    TableSearch,\n  },\n  name: 'tips-list',\n  setup(_, { root }) {\n    const data = reactive({\n      lang: 'zh',\n      fields: [\n        {\n          label: '查询条件',\n          type: 'input',\n          field: 'title',\n          value: '',\n          placeholder: '请输入小知识标题',\n        },\n      ],\n      tableData: [],\n      columns,\n      loading: true,\n      pagination: {\n        total: 0,\n        current: 1,\n        pageSize: 20,\n        pageSizeOptions: ['5', '10', '20', '50', '100'],\n        showQuickJumper: false,\n        showSizeChanger: true,\n      },\n    });\n\n    watch(\n      () => root.$route.path,\n      newVal => {\n        data.lang = newVal.endsWith('/zh') ? 'zh' : 'en';\n        data.pagination.current = 1;\n        request();\n      },\n    );\n\n    function getParams() {\n      const params = {};\n      params.currentPage = data.pagination.current;\n      params.pageSize = data.pagination.pageSize;\n      params.title = data.fields[0].value;\n      params.mediaType = 'KNOWLEDGE';\n      params.languageType = data.lang === 'zh' ? 'CHINESE' : 'ENGLISH';\n      return params;\n    }\n\n    function request() {\n      const params = getParams();\n      data.loading = true;\n      fetchTipsRecord(params)\n        .then(res => {\n          if (res.list) {\n            data.tableData = res.list;\n            data.pagination.total = res.total;\n          }\n        })\n        .finally(() => {\n          data.loading = false;\n        });\n    }\n\n    function handleSubmit() {\n      data.pagination.current = 1;\n      request();\n    }\n\n    function handleTableChange(e) {\n      data.pagination = e;\n      request();\n    }\n\n    function modifyRecoder(record) {\n      root.$router.push({\n        name: 'docs-tips-edit',\n        params: {\n          id: record.id,\n          lang: data.lang,\n        },\n      });\n    }\n    function toEditor() {\n      root.$router.push({\n        name: 'docs-tips-create',\n        params: {\n          lang: data.lang,\n        },\n      });\n    }\n    function actionRecoder(record) {\n      const pstatus = record.pstatus === 0 ? 1 : 0;\n      Modal.confirm({\n        title: '提示',\n        content: `确认${pstatus === 1 ? '发布' : '下线'}该文章吗?`,\n        onOk() {\n          return updateTipsStatus({\n            pstatus,\n            id: record.id,\n          }).then(() => {\n            message.success(`${pstatus === 1 ? '发布' : '下线'}成功`);\n            request();\n          });\n        },\n      });\n    }\n\n    function toppingRecoder(record) {\n      const topStatus = record.topStatus === 0 ? 1 : 0;\n      Modal.confirm({\n        title: '提示',\n        content: `确认${topStatus === 1 ? '置顶' : '取消置顶'}该文章吗?`,\n        onOk() {\n          return topTipsStatus({\n            topStatus,\n            id: record.id,\n          }).then(() => {\n            message.success(`${topStatus === 1 ? '置顶' : '取消置顶'}成功`);\n            request();\n          });\n        },\n      });\n    }\n\n    function deleteRecoder(record) {\n      Modal.confirm({\n        title: '提示',\n        content: '确认删除该文章吗?',\n        onOk() {\n          return deleteTip(record.id).then(() => {\n            message.success('删除成功');\n            request();\n          });\n        },\n      });\n    }\n    onMounted(() => {\n      request();\n    });\n\n    return {\n      ...toRefs(data),\n      handleSubmit,\n      handleTableChange,\n      modifyRecoder,\n      actionRecoder,\n      deleteRecoder,\n      toppingRecoder,\n      toEditor,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.is-info,\n.id-end,\n.is-no {\n  &::before {\n    content: '';\n    border-radius: 50%;\n    width: 4px;\n    height: 4px;\n    display: inline-block;\n    margin-right: 2px;\n    transform: translateY(-2px);\n    background: currentColor;\n  }\n}\n.is-info {\n  color: @success-color;\n}\n.is-end {\n  color: @disabled-color;\n}\n.is-no {\n  color: @warning-color;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListContent.vue?vue&type=template&id=210c34fa&scoped=true&\"\nimport script from \"./ListContent.vue?vue&type=script&lang=js&\"\nexport * from \"./ListContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListContent.vue?vue&type=style&index=0&id=210c34fa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"210c34fa\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request';\n\nexport function fetchTipsRecord(params) {\n  return request({\n    url: 'official/iportal/media/news/record',\n    params,\n    method: 'GET',\n  });\n}\n\nexport function updateTipsStatus(info) {\n  return request({\n    url: 'official/iportal/media/news/change',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function previewTipsInfo(info) {\n  return request({\n    url: 'official/iportal/media/news/preview',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function saveTipsInfo(info) {\n  return request({\n    url: 'official/iportal/media/news/save',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function fetchModifyTipsInfo(id) {\n  return request({\n    url: 'official/iportal/media/news/edit/' + id,\n    method: 'get',\n  });\n}\n\nexport function deleteTip(id) {\n  return request({\n    url: 'official/iportal/media/news/del/' + id,\n    method: 'get',\n  });\n}\n\nexport function topTipsStatus(info) {\n  return request({\n    url: 'official/iportal/top',\n    data: info,\n    method: 'POST',\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=style&index=0&id=210c34fa&lang=less&scoped=true&\""],"sourceRoot":""}