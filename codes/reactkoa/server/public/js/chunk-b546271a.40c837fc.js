(window["webpackJsonpdocs"]=window["webpackJsonpdocs"]||[]).push([["chunk-b546271a"],{"04d1":function(t,e,a){var i=a("342f"),n=i.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},"4cd9":function(t,e,a){"use strict";a("92c2")},"4e82":function(t,e,a){"use strict";var i=a("23e7"),n=a("e330"),o=a("59ed"),r=a("7b0b"),l=a("07fa"),s=a("577e"),c=a("d039"),u=a("addb"),d=a("a640"),p=a("04d1"),f=a("d998"),m=a("2d00"),v=a("512ce"),g=[],h=n(g.sort),b=n(g.push),y=c((function(){g.sort(void 0)})),w=c((function(){g.sort(null)})),k=d("sort"),I=!c((function(){if(m)return m<70;if(!(p&&p>3)){if(f)return!0;if(v)return v<603;var t,e,a,i,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)g.push({k:e+i,v:a})}for(g.sort((function(t,e){return e.v-t.v})),i=0;i<g.length;i++)e=g[i].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),j=y||!w||!k||!I,O=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:s(e)>s(a)?1:-1}};i({target:"Array",proto:!0,forced:j},{sort:function(t){void 0!==t&&o(t);var e=r(this);if(I)return void 0===t?h(e):h(e,t);var a,i,n=[],s=l(e);for(i=0;i<s;i++)i in e&&b(n,e[i]);u(n,O(t)),a=n.length,i=0;while(i<a)e[i]=n[i++];while(i<s)delete e[i++];return e}})},"512ce":function(t,e,a){var i=a("342f"),n=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},"92c2":function(t,e,a){},addb:function(t,e,a){var i=a("4dae"),n=Math.floor,o=function(t,e){var a=t.length,s=n(a/2);return a<8?r(t,e):l(t,o(i(t,0,s),e),o(i(t,s),e),e)},r=function(t,e){var a,i,n=t.length,o=1;while(o<n){i=o,a=t[o];while(i&&e(t[i-1],a)>0)t[i]=t[--i];i!==o++&&(t[i]=a)}return t},l=function(t,e,a,i){var n=e.length,o=a.length,r=0,l=0;while(r<n||l<o)t[r+l]=r<n&&l<o?i(e[r],a[l])<=0?e[r++]:a[l++]:r<n?e[r++]:a[l++];return t};t.exports=o},ade2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-base"},[a("layout-base",{attrs:{title:t.title,crumbs:t.crumbs}},[a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"form-title",attrs:{slot:"title"},slot:"title"},[a("a-button",{staticStyle:{float:"left"},on:{click:function(e){return t.$router.push("/docs/case/list/"+t.lang)}}},[t._v(" 返回 ")]),t.isEdit?a("a-button",{staticStyle:{float:"right"},attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v(" 删除 ")]):t._e(),a("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handlePutIt}},[t._v(" 发布 ")]),a("a-button",{staticStyle:{float:"right"},attrs:{ghost:"",type:"primary",loading:t.previewLoading},on:{click:t.handlePreview}},[t._v(" 预览 ")]),a("a-button",{staticStyle:{float:"right"},attrs:{loading:t.saveLoading},on:{click:t.handleSave}},[t._v(" 保存 ")])],1),a("div",{staticClass:"steps-wrapper"},[a("a-steps",{attrs:{current:t.stepsData.current},on:{change:t.onStepsChange}},t._l(t.stepsData.steps,(function(t){return a("a-step",{key:t.title,attrs:{title:t.title}})})),1)],1),a("div",{staticClass:"steps-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"edit-content"===t.stepsData.steps[t.stepsData.current].content,expression:"stepsData.steps[stepsData.current].content === 'edit-content'"}],staticClass:"content-box edit-content"},[a("a-form",{staticClass:"form",attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[a("a-form-item",{attrs:{label:"案例标题","validate-status":t.$validate.title?"error":"",help:t.$validate.title}},[a("a-input",{attrs:{placeholder:"必填，请输入案例标题"},on:{change:function(e){return t.initValidate("title")}},model:{value:t.viewInfo.title,callback:function(e){t.$set(t.viewInfo,"title",e)},expression:"viewInfo.title"}})],1),a("a-form-item",{attrs:{label:"案例分类","validate-status":t.$validate.sort?"error":"",help:t.$validate.sort}},[a("a-select",{staticStyle:{width:"158px"},attrs:{placeholder:"请选择"},on:{change:function(e){return t.initValidate("sort")}},model:{value:t.viewInfo.sort,callback:function(e){t.$set(t.viewInfo,"sort",e)},expression:"viewInfo.sort"}},t._l(t.sortList,(function(e){return a("a-select-option",{key:e.key},[t._v(" "+t._s(e.title)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"摘要","validate-status":t.$validate.summary?"error":"",help:t.$validate.summary}},[a("a-input",{attrs:{type:"textarea",placeholder:"必填，请输入案例摘要"},on:{change:function(e){return t.initValidate("summary")}},model:{value:t.viewInfo.summary,callback:function(e){t.$set(t.viewInfo,"summary",e)},expression:"viewInfo.summary"}})],1),a("a-form-item",{attrs:{label:"客户名称","validate-status":t.$validate.clientName?"error":"",help:t.$validate.clientName}},[a("a-input",{attrs:{type:"textarea",placeholder:"必填，请输入客户名称"},on:{change:function(e){return t.initValidate("clientName")}},model:{value:t.viewInfo.clientName,callback:function(e){t.$set(t.viewInfo,"clientName",e)},expression:"viewInfo.clientName"}})],1),a("a-form-item",{attrs:{label:"客户logo","validate-status":t.$validate.logoUrl?"error":"",help:t.$validate.logoUrl}},[a("ImgUpload",{staticClass:"set-style",staticStyle:{height:"88px",width:"88px"},attrs:{"default-url":t.viewInfo.logoUrl,tip:""},on:{change:t.handleLogoUploadChange}})],1),a("a-form-item",{attrs:{label:"封面图片","validate-status":t.$validate.picUrl?"error":"",help:t.$validate.picUrl}},[a("ImgUpload",{staticClass:"set-style",staticStyle:{height:"200px",width:"364px"},attrs:{"default-url":t.viewInfo.picUrl,tip:"图片尺寸：728*400，支持png、jpg、gif"},on:{change:t.handleUploadChange}})],1),a("a-form-item",{attrs:{label:"发布时间","validate-status":t.$validate.publicTime?"error":"",help:t.$validate.publicTime}},[a("a-date-picker",{model:{value:t.viewInfo.publicTime,callback:function(e){t.$set(t.viewInfo,"publicTime",e)},expression:"viewInfo.publicTime"}})],1),a("a-form-item",{staticStyle:{"z-index":"1"},attrs:{label:"内容"}},[a("div",{attrs:{id:"tipsEditor"}})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"seo-content"===t.stepsData.steps[t.stepsData.current].content,expression:"stepsData.steps[stepsData.current].content === 'seo-content'"}],staticClass:"content-box seo-content"},[a("a-form",{staticClass:"form",attrs:{"label-col":{span:5},"wrapper-col":{span:15}}},[a("a-form-item",{attrs:{label:"标题","validate-status":t.$seoValidate.title?"error":"",help:t.$seoValidate.title}},[a("a-input",{attrs:{maxLength:"en"===t.lang?80:40,placeholder:"必填，用于搜索引擎优化"},on:{change:function(e){return t.initSeoValidate("title")}},model:{value:t.seoInfo.title,callback:function(e){t.$set(t.seoInfo,"title",e)},expression:"seoInfo.title"}}),a("inputLmitTip",{attrs:{limit:"en"===t.lang?80:40,text:t.seoInfo.title}})],1),a("a-form-item",{attrs:{label:"关键字","validate-status":t.$seoValidate.keyword?"error":"",help:t.$seoValidate.keyword}},[a("a-input",{attrs:{maxLength:"en"===t.lang?80:40,placeholder:"必填，用于搜索引擎优化"},on:{change:function(e){return t.initSeoValidate("keyword")}},model:{value:t.seoInfo.keyword,callback:function(e){t.$set(t.seoInfo,"keyword",e)},expression:"seoInfo.keyword"}}),a("inputLmitTip",{attrs:{limit:"en"===t.lang?80:40,text:t.seoInfo.keyword}})],1),a("a-form-item",{attrs:{label:"描述","validate-status":t.$seoValidate.description?"error":"",help:t.$seoValidate.description}},[a("a-input",{attrs:{maxLength:"en"===t.lang?150:75,placeholder:"必填，用于搜索引擎优化"},on:{change:function(e){return t.initSeoValidate("description")}},model:{value:t.seoInfo.description,callback:function(e){t.$set(t.seoInfo,"description",e)},expression:"seoInfo.description"}}),a("inputLmitTip",{attrs:{limit:"en"===t.lang?150:75,text:t.seoInfo.description}})],1)],1)],1)]),a("a-row",{staticClass:"steps-action"},[a("a-col",{attrs:{offset:5}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.stepsData.current<t.stepsData.steps.length-1,expression:"stepsData.current < stepsData.steps.length - 1"}],attrs:{type:"primary"},on:{click:t.next}},[t._v(" 下一步 ")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.stepsData.current>0,expression:"stepsData.current > 0"}],on:{click:t.prev}},[t._v(" 上一步 ")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.stepsData.current===t.stepsData.steps.length-1,expression:"stepsData.current === stepsData.steps.length - 1"}],staticStyle:{"margin-left":"12px"},attrs:{type:"primary"},on:{click:t.handlePutIt}},[t._v(" 发布 ")])],1)],1)],1)],1)])],1)},n=[],o=a("5530"),r=(a("a4d3"),a("e01a"),a("a9e3"),a("d3b7"),a("159b"),a("b64b"),a("4e82"),a("1d61")),l=a("750b"),s=a("d4ec"),c=a("bee2"),u=a("262e"),d=a("2caf"),p=(a("ac1f"),a("5319"),a("5f87")),f=a("6fad"),m=a.n(f),v=function(t){var e=Object(l["e"])({title:!1,sort:!1,summary:!1,clientName:!1,logoUrl:!1,picUrl:!1,publicTime:!1}),a=Object(l["e"])({title:Object(l["a"])({get:function(){return e.title?t.title?"":"案例标题不能为空":""}}),sort:Object(l["a"])({get:function(){return e.sort?t.sort||0===t.sort?"":"案例分类不能为空":""}}),summary:Object(l["a"])({get:function(){return e.summary?t.summary?"":"案例摘要不能为空":""}}),clientName:Object(l["a"])({get:function(){return e.clientName?t.clientName?"":"客户名称不能为空":""}}),logoUrl:Object(l["a"])({get:function(){return e.logoUrl?t.logoUrl?"":"客户logo不能为空":""}}),picUrl:Object(l["a"])({get:function(){return e.picUrl?t.picUrl?"":"封面图片不能为空":""}}),publicTime:Object(l["a"])({get:function(){return e.publicTime?t.publicTime?"":"发布时间不能为空":""}})});function i(t){e[t]=!0}return{$validate:a,initValidate:i}},g=function(t){var e=Object(l["e"])({title:!1,keyword:!1,description:!1}),a=Object(l["e"])({title:Object(l["a"])({get:function(){return e.title?t.title?"":"标题不能为空":""}}),keyword:Object(l["a"])({get:function(){return e.keyword?t.keyword?"":"关键字不能为空":""}}),description:Object(l["a"])({get:function(){return e.description?t.description?"":"描述不能为空":""}})});function i(t){e[t]=!0}return{$seoValidate:a,initSeoValidate:i}},h=function(t){Object(u["a"])(a,t);var e=Object(d["a"])(a);function a(t){Object(s["a"])(this,a);var i=m.a.$('<div class="w-e-menu">\n        <span title="编辑源码">源码</span>\n      </div>');return e.call(this,i,t)}return Object(c["a"])(a,[{key:"clickHandler",value:function(){this.toggleActive(),this.toggleHtmlCode()}},{key:"toggleActive",value:function(){console.log(this.editor),this.isActive?this.unActive():this.active()}},{key:"toggleHtmlCode",value:function(){var t=this.editor.txt.html();t=this.isActive?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;"):t.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&nbsp;/gi," "),this.editor.txt.html(t)}},{key:"tryChangeActive",value:function(){}}]),a}(m.a.BtnMenu),b=function(t){var e=new m.a(t),a=Object(p["a"])();return e.config.menuFixed=!1,e.config.uploadImgServer="http://devsvc-manual-api.glqa.jpushoa.com/iportal-official/picture",e.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp"],e.config.uploadImgFileName="file",e.menus.extend("source",h),e.config.uploadImgHeaders={Accept:"application/json, text/plain, */*",Authorization:"sessionId="+a},e.config.uploadFileName="file",e.config.menus=["source","head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","emoticon","backColor","link","list","justify","quote","image","table","code","splitLine","undo"],e.config.uploadImgHooks={customInsert:function(t,e){console.log("customInsert",e),t(e.url)}},console.log(e.config),e.create(),e},y=a("4e72"),w=a("c32d"),k=a.n(w),I=a("dae3"),j=a("d549"),O=a("80d4"),x={components:{LayoutBase:r["e"],ImgUpload:j["a"],inputLmitTip:O["a"]},name:"case-edit",setup:function(t,e){var a,i=e.root,n=Object(p["a"])(),r=Object(l["f"])(!!i.$route.params.id),s=Object(l["e"])({title:"",sort:void 0,summary:"",clientName:"",logoUrl:"",picUrl:"",publicTime:k()(),content:""}),c=Object(l["e"])({title:"",keyword:"",description:""}),u=Object(l["e"])({current:0,steps:[{title:"编辑内容",content:"edit-content"},{title:"seo设置",content:"seo-content"}]}),d=Object(l["e"])({lang:"zh",title:r.value?"编辑客户案例":"创建客户案例",isSaved:r.value,id:i.$route.params.id,crumbs:[{path:"",value:"官网管理"},{path:"/docs/case/list",value:"客户案例"},{path:"",value:"中文"},{path:"",value:r.value?"编辑客户案例":"创建客户案例"}],sortList:[{title:"金融业",key:0},{title:"在线教育",key:1},{title:"泛娱乐",key:2},{title:"生活服务",key:3},{title:"医疗健康",key:4},{title:"社区团购",key:5},{title:"媒体资讯",key:6},{title:"房地产",key:7},{title:"政法政务",key:8}],originInfo:{},uploadLoading:!1,uploadLogoLoading:!1,saveLoading:!1,previewLoading:!1,uploadHeaders:{Authorization:"sessionId="+n}});function f(t){s.picUrl=t}function m(t){s.logoUrl=t}Object(l["h"])((function(){return i.$route}),(function(t){d.lang="zh"===t.params.lang?"zh":"en",d.crumbs[1].path=d.crumbs[1].path+"/"+d.lang,"zh"===d.lang?d.crumbs[2].value="中文":d.crumbs[2].value="英文"}));var h=v(s),w=h.$validate,j=h.initValidate,O=g(c),x=O.$seoValidate,$=O.initSeoValidate;function S(){var t=Object(o["a"])(Object(o["a"])({},s),{},{languageType:"zh"===d.lang?"CHINESE":"ENGLISH",seoTitle:c.title,seoKeyWords:c.keyword,seoDescription:c.description,publicTime:s.publicTime.format("YYYY-MM-DD")});return d.id&&"null"!==d.id&&(t.id=Number(d.id)),t}function T(){var t=!1;return s.content=a?a.txt.html():"",j("title"),j("sort"),j("summary"),j("clientName"),j("logoUrl"),j("picUrl"),j("publicTime"),j("content"),Object.keys(w).forEach((function(e){w[e]&&(t=!0)})),t?(u.current=0,!1):!!s.content||(y["message"].error("案例内容不能为空"),!1)}function U(){var t=!1;return $("title"),$("keyword"),$("description"),Object.keys(x).forEach((function(e){x[e]&&(t=!0)})),!t||(u.current=1,!1)}function D(t){for(var e=Object.keys(t),a=0;a<e.length;a++)if(t[e[a]]!==d.originInfo[e[a]])return!0;return!1}function N(){if(T()&&U()){d.saveLoading=!0;var t=S();Object(I["e"])(t).then((function(e){e.id&&(d.id=e.id,d.originInfo=t,d.originInfo.id=Number(d.id),d.isSaved=!0,y["message"].success("保存成功"))})).finally((function(){d.saveLoading=!1}))}}function L(){if(T()&&U()){var t=S();if(!d.isSaved||D(t))return void y["Modal"].error({title:"提示",content:"请先保存后预览或发布~"});d.previewLoading=!0,Object(I["d"])(t.id).then((function(t){t.extraUrl&&window.open(t.extraUrl)})).finally((function(){d.previewLoading=!1}))}}function C(){if(T()&&U()){var t=S();if(!d.isSaved||D(t))return void y["Modal"].error({title:"提示",content:"请先保存后预览或发布~"});y["Modal"].confirm({title:"提示",content:"确认发布该案例？",onOk:function(){return Object(I["g"])({publicStatus:1,id:d.id}).then((function(){y["message"].success("发布成功"),i.$router.push("/docs/case/list/"+d.lang)}))}})}}function E(){y["Modal"].confirm({title:"确认要删除这条信息吗？",content:"您确认要删除这条信息吗，删除后不可恢复",onOk:function(){return Object(I["a"])(d.id).then((function(){y["message"].success("删除成功"),i.$router.go(-1)}))}})}function V(){T()&&u.current++}function A(){u.current--}function _(t){T()&&(u.current=t)}return Object(l["d"])((function(){a=b("#tipsEditor"),r.value&&Object(I["b"])(d.id).then((function(t){var e;s.content=t.content,s.title=t.title,s.summary=t.summary,s.sort=t.sort,s.clientName=t.clientName,s.logoUrl=t.logoUrl||"",s.picUrl=t.picUrl||"",s.publicTime=k()(t.publicTime),c.title=t.seoTitle||"",c.keyword=t.seoKeyWords||"",c.description=t.seoDescription||"",d.lang="ENGLISH"===t.languageType?"en":"zh",d.originInfo=t,d.originInfo.id=Number(d.id),d.originInfo.languageType=(null!==(e=t.languageType)&&void 0!==e?e:"zh"===d.lang)?"CHINESE":"ENGLISH",a.txt.html(t.content),d.originInfo.publicTime=k()(t.publicTime).format("YYYY-MM-DD")}))})),Object(l["c"])((function(){a&&a.destroy(),a=null})),Object(o["a"])(Object(o["a"])({},Object(l["g"])(d)),{},{isEdit:r,viewInfo:s,$validate:w,initValidate:j,seoInfo:c,$seoValidate:x,initSeoValidate:$,handleUploadChange:f,handleLogoUploadChange:m,handlePreview:L,handleSave:N,handlePutIt:C,handleDelete:E,stepsData:u,prev:A,next:V,onStepsChange:_})}},$=x,S=(a("4cd9"),a("2877")),T=Object(S["a"])($,i,n,!1,null,"d510e680",null);e["default"]=T.exports},d998:function(t,e,a){var i=a("342f");t.exports=/MSIE|Trident/.test(i)},dae3:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"g",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return u}));var i=a("b775");function n(t){return Object(i["a"])({url:"official/iportal/client/case/get",params:t,method:"GET"})}function o(t){return Object(i["a"])({url:"official/iportal/client/case/change",data:t,method:"POST"})}function r(t){return Object(i["a"])({url:"official/iportal/client/case/preview/"+t,method:"GET"})}function l(t){return Object(i["a"])({url:"official/iportal/client/case/save",data:t,method:"POST"})}function s(t){return Object(i["a"])({url:"official/iportal/client/case/top",data:t,method:"POST"})}function c(t){return Object(i["a"])({url:"official/iportal/client/case/"+t,method:"GET"})}function u(t){return Object(i["a"])({url:"official/iportal/client/case/"+t,method:"DELETE"})}}}]);
//# sourceMappingURL=chunk-b546271a.40c837fc.js.map