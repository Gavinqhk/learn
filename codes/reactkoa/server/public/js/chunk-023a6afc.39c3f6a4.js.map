{"version":3,"sources":["webpack://docs/./src/views/seo/ListContent.vue?9667","webpack://docs/./src/views/seo/ListContent.vue?92c0","webpack://docs/./src/views/seo/api.js","webpack://docs/./src/views/seo/service.js","webpack://docs/src/views/seo/ListContent.vue","webpack://docs/./src/views/seo/ListContent.vue?3464","webpack://docs/./src/views/seo/ListContent.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fields","on","handleSearch","staticStyle","toEditor","_v","data","index","columns","tableData","loading","pagination","handleTableChange","scopedSlots","_u","key","fn","_","record","$event","modifyRecoder","staticClass","deleteRecoder","text","drawerTitle","drawerVisible","onClose","$seoValidate","pageName","lang","initSeoValidate","model","value","seoInfo","callback","$$v","$set","expression","pageUrl","title","keyWords","description","saveLoading","onSubmit","staticRenderFns","getSeoList","params","request","url","method","saveSeoInfo","info","deleteSeoInfo","id","seoFormValidate","$validateInital","reactive","computed","get","startsWith","resetSeoValidate","components","TableSearch","InputLmitTip","name","setup","total","current","pageSize","pageSizeOptions","showQuickJumper","showSizeChanger","initAllSeoValidate","resetAllSeoValidate","checkSeoFormError","Object","keys","forEach","validatedError","getParams","currentPage","languageType","e","postJson","transfedPostJson","content","onOk","then","component"],"mappings":"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","file":"js/chunk-023a6afc.39c3f6a4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=style&index=0&id=712b8c0c&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{attrs:{\"bordered\":false}},[_c('table-search',{attrs:{\"fields\":_vm.fields},on:{\"submit\":_vm.handleSearch}},[_c('a-button',{staticStyle:{\"float\":\"right\",\"margin-right\":\"24px\",\"margin-top\":\"6px\"},on:{\"click\":_vm.toEditor}},[_vm._v(\" 添加页面 \")])],1),_c('a-table',{attrs:{\"size\":\"default\",\"rowKey\":function (data, index) { return index; },\"columns\":_vm.columns,\"dataSource\":_vm.tableData,\"loading\":_vm.loading,\"pagination\":_vm.pagination},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"action\",fn:function(_, record){return [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.modifyRecoder(record)}}},[_vm._v(\" 编辑 \")]),_c('a-button',{staticClass:\"danger\",attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.deleteRecoder(record)}}},[_vm._v(\" 删除 \")])]}},{key:\"pstatus\",fn:function(text){return [(text == 0)?_c('span',{staticClass:\"is-end\"},[_vm._v(\"未发布\")]):(text == 1)?_c('span',{staticClass:\"is-info\"},[_vm._v(\"已发布\")]):_c('span',{staticClass:\"is-no\"},[_vm._v(\"已更新\")])]}}])}),_c('a-drawer',{staticClass:\"drawer-wrapper\",attrs:{\"title\":_vm.drawerTitle,\"width\":\"40%\",\"visible\":_vm.drawerVisible},on:{\"close\":_vm.onClose}},[_c('a-form',{staticClass:\"form\"},[_c('a-form-item',{attrs:{\"label\":\"页面名称\",\"validate-status\":_vm.$seoValidate.pageName ? 'error' : '',\"help\":_vm.$seoValidate.pageName}},[_c('a-input',{attrs:{\"maxLength\":_vm.lang==='en' ? 20 : 10,\"placeholder\":\"必填，请输入页面名称\"},on:{\"change\":function($event){return _vm.initSeoValidate('pageName')}},model:{value:(_vm.seoInfo.pageName),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"pageName\", $$v)},expression:\"seoInfo.pageName\"}}),_c('InputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 20 : 10,\"text\":_vm.seoInfo.pageName}})],1),_c('a-form-item',{attrs:{\"label\":\"页面链接\",\"validate-status\":_vm.$seoValidate.pageUrl ? 'error' : '',\"help\":_vm.$seoValidate.pageUrl}},[_c('a-input',{attrs:{\"placeholder\":\"必填，请输入页面链接（http|https://开头）\"},on:{\"change\":function($event){return _vm.initSeoValidate('pageUrl')}},model:{value:(_vm.seoInfo.pageUrl),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"pageUrl\", $$v)},expression:\"seoInfo.pageUrl\"}})],1),_c('a-form-item',{attrs:{\"label\":\"标题\",\"validate-status\":_vm.$seoValidate.title ? 'error' : '',\"help\":_vm.$seoValidate.title}},[_c('a-input',{attrs:{\"maxLength\":_vm.lang==='en' ? 80 : 40,\"placeholder\":\"必填，请输入标题\"},on:{\"change\":function($event){return _vm.initSeoValidate('title')}},model:{value:(_vm.seoInfo.title),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"title\", $$v)},expression:\"seoInfo.title\"}}),_c('InputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 80 : 40,\"text\":_vm.seoInfo.title}})],1),_c('a-form-item',{attrs:{\"label\":\"关键词\",\"validate-status\":_vm.$seoValidate.keyWords ? 'error' : '',\"help\":_vm.$seoValidate.keyWords}},[_c('a-textarea',{attrs:{\"maxLength\":_vm.lang==='en' ? 80 : 40,\"placeholder\":\"必填，请输入关键词\"},on:{\"change\":function($event){return _vm.initSeoValidate('keyWords')}},model:{value:(_vm.seoInfo.keyWords),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"keyWords\", $$v)},expression:\"seoInfo.keyWords\"}}),_c('InputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 80 : 40,\"text\":_vm.seoInfo.keyWords}})],1),_c('a-form-item',{attrs:{\"label\":\"描述\",\"validate-status\":_vm.$seoValidate.description ? 'error' : '',\"help\":_vm.$seoValidate.description}},[_c('a-textarea',{attrs:{\"maxLength\":_vm.lang==='en' ? 150 : 75,\"placeholder\":\"必填，请输入描述\"},on:{\"change\":function($event){return _vm.initSeoValidate('description')}},model:{value:(_vm.seoInfo.description),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"description\", $$v)},expression:\"seoInfo.description\"}}),_c('InputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 150 : 75,\"text\":_vm.seoInfo.description}})],1)],1),_c('div',{staticClass:\"draw-bottom\"},[_c('a-button',{on:{\"click\":_vm.onClose}},[_vm._v(\" 取消 \")]),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saveLoading},on:{\"click\":_vm.onSubmit}},[_vm._v(\" 确认 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request';\n\nexport function getSeoList(params) {\n  return request({\n    url: 'official/iportal/seo/optimization/get',\n    params,\n    method: 'GET',\n  });\n}\n\nexport function getSeoInfo(id) {\n  return request({\n    url: 'official/iportal/seo/optimization/' + id,\n    method: 'GET',\n  });\n}\n\nexport function saveSeoInfo(info) {\n  return request({\n    url: 'official/iportal/seo/optimization/save',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function deleteSeoInfo(id) {\n  return request({\n    url: 'official/iportal/seo/optimization/' + id,\n    method: 'DELETE',\n  });\n}\n","import { reactive, computed } from '@vue/composition-api';\n\nexport const seoFormValidate = seoInfo => {\n  const $validateInital = reactive({\n    pageName: false,\n    pageUrl: false,\n    title: false,\n    keyWords: false,\n    description: false,\n  });\n\n  const $seoValidate = reactive({\n    pageName: computed({\n      get: () => {\n        if (!$validateInital.pageName) return '';\n        return seoInfo.pageName ? '' : '页面名称不能为空';\n      },\n    }),\n    pageUrl: computed({\n      get: () => {\n        if (!$validateInital.pageUrl) return '';\n        if (seoInfo.pageUrl) {\n          return seoInfo.pageUrl.startsWith('http://') || seoInfo.pageUrl.startsWith('https://')\n            ? ''\n            : '页面链接要以http或者https开头';\n        }\n        return '页面链接不能为空';\n      },\n    }),\n    title: computed({\n      get: () => {\n        if (!$validateInital.title) return '';\n        return seoInfo.title ? '' : '标题不能为空';\n      },\n    }),\n    keyWords: computed({\n      get: () => {\n        if (!$validateInital.keyWords) return '';\n        return seoInfo.keyWords ? '' : '关键字不能为空';\n      },\n    }),\n    description: computed({\n      get: () => {\n        if (!$validateInital.description) return '';\n        return seoInfo.description ? '' : '描述不能为空';\n      },\n    }),\n  });\n\n  function initSeoValidate(key) {\n    $validateInital[key] = true;\n  }\n  function resetSeoValidate(key) {\n    $validateInital[key] = false;\n  }\n\n  return {\n    $seoValidate,\n    initSeoValidate,\n    resetSeoValidate,\n  };\n};\n","<template>\n  <a-card :bordered=\"false\">\n    <table-search :fields=\"fields\" @submit=\"handleSearch\">\n      <a-button style=\"float:right; margin-right: 24px;margin-top:6px\" @click=\"toEditor\">\n        添加页面\n      </a-button>\n    </table-search>\n    <a-table size=\"default\" :rowKey=\"(data, index) => index\" :columns=\"columns\"\n      :dataSource=\"tableData\" :loading=\"loading\" :pagination=\"pagination\"\n      @change=\"handleTableChange\">\n      <template slot=\"action\" slot-scope=\"_, record\">\n        <a-button type=\"link\" @click=\"modifyRecoder(record)\">\n          编辑\n        </a-button>\n        <a-button type=\"link\" class=\"danger\" @click=\"deleteRecoder(record)\">\n          删除\n        </a-button>\n      </template>\n      <template slot=\"pstatus\" slot-scope=\"text\">\n        <span class=\"is-end\" v-if=\"text == 0\">未发布</span>\n        <span class=\"is-info\" v-else-if=\"text == 1\">已发布</span>\n        <span class=\"is-no\" v-else>已更新</span>\n      </template>\n    </a-table>\n    <a-drawer :title=\"drawerTitle\" width=\"40%\" :visible=\"drawerVisible\" @close=\"onClose\"\n      class=\"drawer-wrapper\">\n      <a-form class=\"form\">\n        <a-form-item label=\"页面名称\" :validate-status=\"$seoValidate.pageName ? 'error' : ''\"\n          :help=\"$seoValidate.pageName\">\n          <a-input v-model=\"seoInfo.pageName\" :maxLength=\"lang==='en' ? 20 : 10\"\n            @change=\"initSeoValidate('pageName')\" placeholder=\"必填，请输入页面名称\" />\n          <InputLmitTip :limit=\"lang==='en' ? 20 : 10\" :text=\"seoInfo.pageName\">\n          </InputLmitTip>\n        </a-form-item>\n        <a-form-item label=\"页面链接\" :validate-status=\"$seoValidate.pageUrl ? 'error' : ''\"\n          :help=\"$seoValidate.pageUrl\">\n          <a-input v-model=\"seoInfo.pageUrl\" @change=\"initSeoValidate('pageUrl')\"\n            placeholder=\"必填，请输入页面链接（http|https://开头）\" />\n        </a-form-item>\n        <a-form-item label=\"标题\" :validate-status=\"$seoValidate.title ? 'error' : ''\"\n          :help=\"$seoValidate.title\">\n          <a-input v-model=\"seoInfo.title\" :maxLength=\"lang==='en' ? 80 : 40\"\n            @change=\"initSeoValidate('title')\" placeholder=\"必填，请输入标题\" />\n          <InputLmitTip :limit=\"lang==='en' ? 80 : 40\" :text=\"seoInfo.title\">\n          </InputLmitTip>\n        </a-form-item>\n        <a-form-item label=\"关键词\" :validate-status=\"$seoValidate.keyWords ? 'error' : ''\"\n          :help=\"$seoValidate.keyWords\">\n          <a-textarea v-model=\"seoInfo.keyWords\" :maxLength=\"lang==='en' ? 80 : 40\"\n            @change=\"initSeoValidate('keyWords')\" placeholder=\"必填，请输入关键词\" />\n          <InputLmitTip :limit=\"lang==='en' ? 80 : 40\" :text=\"seoInfo.keyWords\">\n          </InputLmitTip>\n        </a-form-item>\n        <a-form-item label=\"描述\" :validate-status=\"$seoValidate.description ? 'error' : ''\"\n          :help=\"$seoValidate.description\">\n          <a-textarea v-model=\"seoInfo.description\" :maxLength=\"lang==='en' ? 150 : 75\"\n            @change=\"initSeoValidate('description')\" placeholder=\"必填，请输入描述\" />\n          <InputLmitTip :limit=\"lang==='en' ? 150 : 75\" :text=\"seoInfo.description\">\n          </InputLmitTip>\n        </a-form-item>\n      </a-form>\n      <div class=\"draw-bottom\">\n        <a-button @click=\"onClose\">\n          取消\n        </a-button>\n        <a-button type=\"primary\" @click=\"onSubmit\" :loading=\"saveLoading\">\n          确认\n        </a-button>\n      </div>\n    </a-drawer>\n  </a-card>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { TableSearch } from '@jg/via-ui';\nimport { reactive, toRefs, onMounted, watch } from '@vue/composition-api';\nimport { getSeoList, deleteSeoInfo, saveSeoInfo } from './api';\nimport { seoFormValidate } from './service';\nimport { Modal, message } from 'ant-design-vue';\nimport InputLmitTip from '@/components/InputLmitTip';\n\nconst columns = [\n  {\n    title: '页面名称',\n    dataIndex: 'pageName',\n    width: '110px',\n  },\n  {\n    title: '页面链接',\n    dataIndex: 'pageUrl',\n    width: '120px',\n  },\n  {\n    title: '标题',\n    dataIndex: 'title',\n    maxWidth: '150px',\n  },\n  {\n    title: '关键字',\n    dataIndex: 'keyWords',\n    maxWidth: '200px',\n  },\n  {\n    title: '描述',\n    dataIndex: 'description',\n    maxWidth: '200px',\n  },\n  {\n    title: '创建日期',\n    dataIndex: 'createTime',\n    customRender: text => moment(text).format('YYYY-MM-DD HH:mm:ss'),\n    width: '110px',\n  },\n  {\n    title: '创建者',\n    dataIndex: 'operator',\n    width: '100px',\n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    align: 'center',\n    width: '100px',\n    scopedSlots: { customRender: 'action' },\n  },\n];\n\nexport default {\n  components: {\n    TableSearch,\n    InputLmitTip,\n  },\n  name: 'tips-list',\n  setup(_, { root }) {\n    const data = reactive({\n      lang: 'zh',\n      fields: [\n        {\n          label: '查询条件',\n          type: 'input',\n          field: 'keyWords',\n          value: '',\n          placeholder: '请输入搜索关键字',\n        },\n      ],\n      tableData: [],\n      columns,\n      loading: true,\n      pagination: {\n        total: 0,\n        current: 1,\n        pageSize: 20,\n        pageSizeOptions: ['5', '10', '20', '50', '100'],\n        showQuickJumper: false,\n        showSizeChanger: true,\n      },\n      drawerVisible: false,\n      saveLoading: false,\n      drawerTitle: '添加页面',\n    });\n    const seoInfo = reactive({\n      id: '',\n      pageName: '',\n      pageUrl: '',\n      title: '',\n      keyWords: '',\n      description: '',\n    });\n\n    const { $seoValidate, initSeoValidate, resetSeoValidate } = seoFormValidate(seoInfo);\n    watch(\n      () => root.$route.path,\n      newVal => {\n        data.lang = newVal.endsWith('/zh') ? 'zh' : 'en';\n        data.pagination.current = 1;\n        request();\n      },\n    );\n    function initAllSeoValidate() {\n      initSeoValidate('pageName');\n      initSeoValidate('pageUrl');\n      initSeoValidate('title');\n      initSeoValidate('keyWords');\n      initSeoValidate('description');\n    }\n    function resetAllSeoValidate() {\n      resetSeoValidate('pageName');\n      resetSeoValidate('pageUrl');\n      resetSeoValidate('title');\n      resetSeoValidate('keyWords');\n      resetSeoValidate('description');\n      seoInfo.id = '';\n      seoInfo.pageName = '';\n      seoInfo.pageUrl = '';\n      seoInfo.title = '';\n      seoInfo.keyWords = '';\n      seoInfo.description = '';\n    }\n    function checkSeoFormError() {\n      let validatedError = false;\n      initAllSeoValidate();\n      Object.keys($seoValidate).forEach(key => {\n        if ($seoValidate[key]) {\n          validatedError = true;\n        }\n      });\n\n      if (validatedError) return false;\n\n      return true;\n    }\n    function getParams() {\n      const params = {};\n      params.currentPage = data.pagination.current;\n      params.pageSize = data.pagination.pageSize;\n      params.keyWords = data.fields[0].value;\n      params.languageType = data.lang === 'zh' ? 'CHINESE' : 'ENGLISH';\n      return params;\n    }\n\n    function request() {\n      const params = getParams();\n      data.loading = true;\n      getSeoList(params)\n        .then(res => {\n          if (res.list) {\n            data.tableData = res.list;\n            data.pagination.total = res.total;\n          }\n        })\n        .finally(() => {\n          data.loading = false;\n        });\n    }\n\n    function handleSearch() {\n      data.pagination.current = 1;\n      request();\n    }\n\n    function handleTableChange(e) {\n      data.pagination = e;\n      request();\n    }\n\n    function modifyRecoder(record) {\n      data.drawerVisible = true;\n      data.drawerTitle = '编辑页面';\n      seoInfo.id = record.id;\n      seoInfo.pageName = record.pageName;\n      seoInfo.pageUrl = record.pageUrl;\n      seoInfo.title = record.title;\n      seoInfo.keyWords = record.keyWords;\n      seoInfo.description = record.description;\n    }\n    function toEditor() {\n      data.drawerVisible = true;\n      data.drawerTitle = '添加页面';\n    }\n    function onSubmit() {\n      if (checkSeoFormError()) {\n        data.saveLoading = true;\n        const postJson = transfedPostJson();\n        saveSeoInfo(postJson)\n          .then(res => {\n            // if (res.code === 2000 && res.message) {\n            message.success('保存成功');\n            data.drawerVisible = false;\n            handleSearch();\n            resetAllSeoValidate();\n            // }\n          })\n          .finally(() => {\n            data.saveLoading = false;\n          });\n      }\n    }\n    function transfedPostJson() {\n      const postJson = {\n        ...seoInfo,\n      };\n      if (!postJson.id) {\n        delete postJson.id;\n      }\n      postJson.languageType = data.lang === 'zh' ? 'CHINESE' : 'ENGLISH';\n      return postJson;\n    }\n    function onClose() {\n      resetAllSeoValidate();\n      data.drawerVisible = false;\n    }\n    function deleteRecoder(record) {\n      Modal.confirm({\n        title: '确认要删除这条信息吗？',\n        content: '您确认要删除这条信息吗，删除后不可恢复',\n        onOk() {\n          return deleteSeoInfo(record.id).then(() => {\n            message.success('删除成功');\n            request();\n          });\n        },\n      });\n    }\n    onMounted(() => {\n      request();\n    });\n\n    return {\n      ...toRefs(data),\n      handleSearch,\n      handleTableChange,\n      modifyRecoder,\n      deleteRecoder,\n      toEditor,\n      onClose,\n      onSubmit,\n      seoInfo,\n      $seoValidate,\n      initSeoValidate,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.is-info,\n.id-end,\n.is-no {\n  &::before {\n    content: '';\n    border-radius: 50%;\n    width: 4px;\n    height: 4px;\n    display: inline-block;\n    margin-right: 2px;\n    transform: translateY(-2px);\n    background: currentColor;\n  }\n}\n.is-info {\n  color: @success-color;\n}\n.is-end {\n  color: @disabled-color;\n}\n.is-no {\n  color: @warning-color;\n}\n.draw-bottom {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  border-top: 1px solid #e8e8e8;\n  background: #fff;\n  padding: 10px 16px;\n  text-align: right;\n  left: 0;\n  border-radius: 0 0 4px 4px;\n  .ant-btn:first-of-type {\n    margin-right: 8px;\n  }\n}\n.ant-form-item:last-of-type {\n  margin-bottom: 60px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListContent.vue?vue&type=template&id=712b8c0c&scoped=true&\"\nimport script from \"./ListContent.vue?vue&type=script&lang=js&\"\nexport * from \"./ListContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListContent.vue?vue&type=style&index=0&id=712b8c0c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"712b8c0c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}