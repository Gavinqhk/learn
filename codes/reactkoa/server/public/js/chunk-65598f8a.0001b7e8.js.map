{"version":3,"sources":["webpack://docs/./src/views/tips/Editor.vue?9cef","webpack://docs/./src/api/index.js","webpack://docs/./src/views/tips/Editor.vue?3d61","webpack://docs/./src/views/tips/service.js","webpack://docs/src/views/tips/Editor.vue","webpack://docs/./src/views/tips/Editor.vue?a9f8","webpack://docs/./src/views/tips/Editor.vue"],"names":["fetchTipsRecord","params","request","url","method","updateTipsStatus","info","data","previewTipsInfo","saveTipsInfo","fetchModifyTipsInfo","id","deleteTip","topTipsStatus","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","crumbs","slot","staticStyle","on","$event","$router","push","lang","_v","handleDelete","_e","handlePutIt","previewLoading","handlePreview","saveLoading","handleSave","stepsData","current","onStepsChange","_l","item","key","directives","name","rawName","value","steps","content","expression","span","$validate","initValidate","model","viewInfo","callback","$$v","$set","remark","posterUrl","handleUploadChange","isJgLink","externalUrl","$seoValidate","initSeoValidate","seoInfo","keyword","description","length","next","prev","staticRenderFns","editFormValidate","$validateInital","reactive","computed","get","seoFormValidate","SourceMenu","editor","$elem","WangEditor","$","toggleActive","toggleHtmlCode","console","log","isActive","unActive","active","editorHtml","txt","html","replace","BtnMenu","createEditor","token","getToken","config","menuFixed","uploadImgServer","process","uploadImgAccept","uploadImgFileName","menus","extend","uploadImgHeaders","Accept","Authorization","uploadFileName","uploadImgHooks","customInsert","insertImgFn","result","create","components","setup","picUrl","psite","ptime","isEdit","isSaved","root","$route","originInfo","uploadLoading","uploadHeaders","transfedPostJson","seoTitle","seoKeyWords","seoDescription","format","mediaType","postJson","Number","languageType","checkFormError","Object","keys","forEach","validatedError","checkSeoFormError","diffOriginInfo","i","onOk","pstatus","go","res","destroy","component"],"mappings":"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","file":"js/chunk-65598f8a.0001b7e8.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&id=286d8486&lang=less&scoped=true&\"","import request from '@/utils/request';\n\nexport function fetchTipsRecord(params) {\n  return request({\n    url: 'official/iportal/media/news/record',\n    params,\n    method: 'GET',\n  });\n}\n\nexport function updateTipsStatus(info) {\n  return request({\n    url: 'official/iportal/media/news/change',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function previewTipsInfo(info) {\n  return request({\n    url: 'official/iportal/media/news/preview',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function saveTipsInfo(info) {\n  return request({\n    url: 'official/iportal/media/news/save',\n    data: info,\n    method: 'POST',\n  });\n}\n\nexport function fetchModifyTipsInfo(id) {\n  return request({\n    url: 'official/iportal/media/news/edit/' + id,\n    method: 'get',\n  });\n}\n\nexport function deleteTip(id) {\n  return request({\n    url: 'official/iportal/media/news/del/' + id,\n    method: 'get',\n  });\n}\n\nexport function topTipsStatus(info) {\n  return request({\n    url: 'official/iportal/top',\n    data: info,\n    method: 'POST',\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-base\"},[_c('layout-base',{attrs:{\"title\":_vm.title,\"crumbs\":_vm.crumbs}},[_c('div',[_c('a-card',{attrs:{\"bordered\":false}},[_c('div',{staticClass:\"form-title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('a-button',{staticStyle:{\"float\":\"left\"},on:{\"click\":function($event){return _vm.$router.push((\"/docs/jtips/list/\" + _vm.lang))}}},[_vm._v(\" 返回 \")]),(_vm.isEdit)?_c('a-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"danger\"},on:{\"click\":_vm.handleDelete}},[_vm._v(\" 删除 \")]):_vm._e(),_c('a-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handlePutIt}},[_vm._v(\" 发布 \")]),_c('a-button',{staticStyle:{\"float\":\"right\"},attrs:{\"ghost\":\"\",\"type\":\"primary\",\"loading\":_vm.previewLoading},on:{\"click\":_vm.handlePreview}},[_vm._v(\" 预览 \")]),_c('a-button',{staticStyle:{\"float\":\"right\"},attrs:{\"loading\":_vm.saveLoading},on:{\"click\":_vm.handleSave}},[_vm._v(\" 保存 \")])],1),_c('div',{staticClass:\"steps-wrapper\"},[_c('a-steps',{attrs:{\"current\":_vm.stepsData.current},on:{\"change\":_vm.onStepsChange}},_vm._l((_vm.stepsData.steps),function(item){return _c('a-step',{key:item.title,attrs:{\"title\":item.title}})}),1)],1),_c('div',{staticClass:\"steps-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsData.steps[_vm.stepsData.current].content === 'edit-content'),expression:\"stepsData.steps[stepsData.current].content === 'edit-content'\"}],staticClass:\"content-box edit-content\"},[_c('a-form',{staticClass:\"form\",attrs:{\"label-col\":{ span: 5 },\"wrapper-col\":{ span: 15 }}},[_c('a-form-item',{attrs:{\"label\":\"文章标题\",\"validate-status\":_vm.$validate.title ? 'error' : '',\"help\":_vm.$validate.title}},[_c('a-input',{attrs:{\"placeholder\":\"必填，请输入文章标题\"},on:{\"change\":function($event){return _vm.initValidate('title')}},model:{value:(_vm.viewInfo.title),callback:function ($$v) {_vm.$set(_vm.viewInfo, \"title\", $$v)},expression:\"viewInfo.title\"}})],1),_c('a-form-item',{attrs:{\"label\":\"发布站点\"}},[_c('a-input',{attrs:{\"placeholder\":\"非必填，该文章的发布站点名称\"},model:{value:(_vm.viewInfo.psite),callback:function ($$v) {_vm.$set(_vm.viewInfo, \"psite\", $$v)},expression:\"viewInfo.psite\"}})],1),_c('a-form-item',{attrs:{\"label\":\"摘要\",\"validate-status\":_vm.$validate.remark ? 'error' : '',\"help\":_vm.$validate.remark}},[_c('a-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"必填，请输入文章摘要\"},on:{\"change\":function($event){return _vm.initValidate('remark')}},model:{value:(_vm.viewInfo.remark),callback:function ($$v) {_vm.$set(_vm.viewInfo, \"remark\", $$v)},expression:\"viewInfo.remark\"}})],1),_c('a-form-item',{attrs:{\"label\":\"选择图片\"}},[_c('ImgUpload',{staticClass:\"set-style\",staticStyle:{\"height\":\"132px\"},attrs:{\"default-url\":_vm.viewInfo.posterUrl,\"tip\":\"图片尺寸：728*400，支持png、jpg、gif\"},on:{\"change\":_vm.handleUploadChange}})],1),_c('a-form-item',{attrs:{\"label\":\"发布时间\"}},[_c('a-date-picker',{model:{value:(_vm.viewInfo.ptime),callback:function ($$v) {_vm.$set(_vm.viewInfo, \"ptime\", $$v)},expression:\"viewInfo.ptime\"}})],1),_c('a-form-item',{attrs:{\"label\":\"站点\"}},[_c('a-radio-group',{attrs:{\"button-style\":\"solid\"},model:{value:(_vm.viewInfo.isJgLink),callback:function ($$v) {_vm.$set(_vm.viewInfo, \"isJgLink\", $$v)},expression:\"viewInfo.isJgLink\"}},[_c('a-radio-button',{attrs:{\"value\":1}},[_vm._v(\" 极光本站 \")]),_c('a-radio-button',{attrs:{\"value\":0}},[_vm._v(\" 外部链接 \")])],1)],1),_c('a-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewInfo.isJgLink),expression:\"viewInfo.isJgLink\"}],staticStyle:{\"z-index\":\"1\"},attrs:{\"label\":\"内容\"}},[_c('div',{attrs:{\"id\":\"tipsEditor\"}})]),_c('a-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.viewInfo.isJgLink),expression:\"!viewInfo.isJgLink\"}],attrs:{\"label\":\"外链地址\",\"validate-status\":_vm.$validate.externalUrl ? 'error' : '',\"help\":_vm.$validate.externalUrl}},[_c('a-input',{attrs:{\"placeholder\":\"必填，请输入外链地址\"},on:{\"change\":function($event){return _vm.initValidate('externalUrl')}},model:{value:(_vm.viewInfo.externalUrl),callback:function ($$v) {_vm.$set(_vm.viewInfo, \"externalUrl\", $$v)},expression:\"viewInfo.externalUrl\"}})],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsData.steps[_vm.stepsData.current].content === 'seo-content'),expression:\"stepsData.steps[stepsData.current].content === 'seo-content'\"}],staticClass:\"content-box seo-content\"},[_c('a-form',{staticClass:\"form\",attrs:{\"label-col\":{ span: 5 },\"wrapper-col\":{ span: 15 }}},[_c('a-form-item',{attrs:{\"label\":\"标题\",\"validate-status\":_vm.$seoValidate.title ? 'error' : '',\"help\":_vm.$seoValidate.title}},[_c('a-input',{attrs:{\"maxLength\":_vm.lang==='en' ? 80 : 40,\"placeholder\":\"必填，用于搜索引擎优化\"},on:{\"change\":function($event){return _vm.initSeoValidate('title')}},model:{value:(_vm.seoInfo.title),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"title\", $$v)},expression:\"seoInfo.title\"}}),_c('inputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 80 : 40,\"text\":_vm.seoInfo.title}})],1),_c('a-form-item',{attrs:{\"label\":\"关键字\",\"validate-status\":_vm.$seoValidate.keyword ? 'error' : '',\"help\":_vm.$seoValidate.keyword}},[_c('a-input',{attrs:{\"maxLength\":_vm.lang==='en' ? 80 : 40,\"placeholder\":\"必填，用于搜索引擎优化\"},on:{\"change\":function($event){return _vm.initSeoValidate('keyword')}},model:{value:(_vm.seoInfo.keyword),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"keyword\", $$v)},expression:\"seoInfo.keyword\"}}),_c('inputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 80 : 40,\"text\":_vm.seoInfo.keyword}})],1),_c('a-form-item',{attrs:{\"label\":\"描述\",\"validate-status\":_vm.$seoValidate.description ? 'error' : '',\"help\":_vm.$seoValidate.description}},[_c('a-input',{attrs:{\"maxLength\":_vm.lang==='en' ? 150 : 75,\"placeholder\":\"必填，用于搜索引擎优化\"},on:{\"change\":function($event){return _vm.initSeoValidate('description')}},model:{value:(_vm.seoInfo.description),callback:function ($$v) {_vm.$set(_vm.seoInfo, \"description\", $$v)},expression:\"seoInfo.description\"}}),_c('inputLmitTip',{attrs:{\"limit\":_vm.lang==='en' ? 150 : 75,\"text\":_vm.seoInfo.description}})],1)],1)],1)]),_c('a-row',{staticClass:\"steps-action\"},[_c('a-col',{attrs:{\"offset\":5}},[_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsData.current < _vm.stepsData.steps.length - 1),expression:\"stepsData.current < stepsData.steps.length - 1\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.next}},[_vm._v(\" 下一步 \")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsData.current > 0),expression:\"stepsData.current > 0\"}],on:{\"click\":_vm.prev}},[_vm._v(\" 上一步 \")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepsData.current === _vm.stepsData.steps.length - 1),expression:\"stepsData.current === stepsData.steps.length - 1\"}],staticStyle:{\"margin-left\":\"12px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handlePutIt}},[_vm._v(\" 发布 \")])],1)],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { getToken } from '@/utils/auth';\nimport { reactive, computed } from '@vue/composition-api';\nimport WangEditor from 'wangeditor';\n\nexport const editFormValidate = viewInfo => {\n  const $validateInital = reactive({\n    title: false,\n    remark: false,\n    externalUrl: false,\n  });\n\n  const $validate = reactive({\n    title: computed({\n      get: () => {\n        if (!$validateInital.title) return '';\n        return viewInfo.title ? '' : '文章标题不能为空';\n      },\n    }),\n    remark: computed({\n      get: () => {\n        if (!$validateInital.remark) return '';\n        return viewInfo.remark ? '' : '文章摘要不能为空';\n      },\n    }),\n    externalUrl: computed({\n      get: () => {\n        if (viewInfo.isJgLink || !$validateInital.externalUrl) return '';\n        return viewInfo.externalUrl ? '' : '外部连接不能为空';\n      },\n    }),\n  });\n\n  function initValidate(key) {\n    $validateInital[key] = true;\n  }\n\n  return {\n    $validate,\n    initValidate,\n  };\n};\nexport const seoFormValidate = seoInfo => {\n  const $validateInital = reactive({\n    title: false,\n    keyword: false,\n    description: false,\n  });\n\n  const $seoValidate = reactive({\n    title: computed({\n      get: () => {\n        if (!$validateInital.title) return '';\n        return seoInfo.title ? '' : '标题不能为空';\n      },\n    }),\n    keyword: computed({\n      get: () => {\n        if (!$validateInital.keyword) return '';\n        return seoInfo.keyword ? '' : '关键字不能为空';\n      },\n    }),\n    description: computed({\n      get: () => {\n        if (!$validateInital.description) return '';\n        return seoInfo.description ? '' : '描述不能为空';\n      },\n    }),\n  });\n\n  function initSeoValidate(key) {\n    $validateInital[key] = true;\n  }\n\n  return {\n    $seoValidate,\n    initSeoValidate,\n  };\n};\nclass SourceMenu extends WangEditor.BtnMenu {\n  constructor(editor) {\n    const $elem = WangEditor.$(\n      `<div class=\"w-e-menu\">\n        <span title=\"编辑源码\">源码</span>\n      </div>`,\n    );\n    super($elem, editor);\n  }\n\n  clickHandler() {\n    this.toggleActive();\n    this.toggleHtmlCode();\n  }\n\n  toggleActive() {\n    console.log(this.editor);\n    this.isActive ? this.unActive() : this.active();\n  }\n\n  toggleHtmlCode() {\n    let editorHtml = this.editor.txt.html();\n    if (this.isActive) {\n      editorHtml = editorHtml.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/ /g, '&nbsp;');\n    } else {\n      editorHtml = editorHtml\n        .replace(/&lt;/gi, '<')\n        .replace(/&gt;/gi, '>')\n        .replace(/&nbsp;/gi, ' ');\n    }\n    this.editor.txt.html(editorHtml);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  tryChangeActive() {\n    // console.log(this)\n  }\n}\n\nexport const createEditor = id => {\n  const editor = new WangEditor(id);\n  const token = getToken();\n\n  editor.config.menuFixed = false;\n  editor.config.uploadImgServer = process.env.VUE_APP_API_UPLOAD_URL + '/iportal-official/picture';\n  editor.config.uploadImgAccept = ['jpg', 'jpeg', 'png', 'gif', 'bmp'];\n  editor.config.uploadImgFileName = 'file';\n  editor.menus.extend('source', SourceMenu);\n\n  editor.config.uploadImgHeaders = {\n    Accept: 'application/json, text/plain, */*',\n    Authorization: 'sessionId=' + token,\n  };\n  editor.config.uploadFileName = 'file';\n  editor.config.menus = [\n    'source',\n    'head',\n    'bold',\n    'fontSize',\n    'fontName',\n    'italic',\n    'underline',\n    'strikeThrough',\n    'indent',\n    'lineHeight',\n    'foreColor',\n    'emoticon',\n    'backColor',\n    'link',\n    'list',\n    'justify',\n    'quote',\n    'image',\n    'table',\n    'code',\n    'splitLine',\n    'undo',\n  ];\n\n  editor.config.uploadImgHooks = {\n    customInsert(insertImgFn, result) {\n      // result 即服务端返回的接口\n      console.log('customInsert', result);\n\n      // insertImgFn 可把图片插入到编辑器，传入图片 src ，执行函数即可\n      insertImgFn(result.url);\n    },\n  };\n  console.log(editor.config);\n  editor.create();\n  return editor;\n};\n","<template>\n  <div class=\"layout-base\">\n    <layout-base :title=\"title\" :crumbs=\"crumbs\">\n      <div>\n        <a-card :bordered=\"false\">\n          <div slot=\"title\" class=\"form-title\">\n            <a-button style=\"float:left\" @click=\"$router.push(`/docs/jtips/list/${lang}`)\">\n              返回\n            </a-button>\n            <a-button type=\"danger\" style=\"float:right\" v-if=\"isEdit\" @click=\"handleDelete\">\n              删除\n            </a-button>\n            <a-button type=\"primary\" style=\"float:right\" @click=\"handlePutIt\">\n              发布\n            </a-button>\n            <a-button ghost type=\"primary\" style=\"float:right\" @click=\"handlePreview\"\n              :loading=\"previewLoading\">\n              预览\n            </a-button>\n            <a-button style=\"float:right\" @click=\"handleSave\" :loading=\"saveLoading\">\n              保存\n            </a-button>\n          </div>\n          <div class=\"steps-wrapper\">\n            <a-steps :current=\"stepsData.current\" @change=\"onStepsChange\">\n              <a-step v-for=\"item in stepsData.steps\" :key=\"item.title\" :title=\"item.title\" />\n            </a-steps>\n          </div>\n          <div class=\"steps-content\">\n            <div class=\"content-box edit-content\"\n              v-show=\"stepsData.steps[stepsData.current].content === 'edit-content'\">\n              <a-form :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 15 }\" class=\"form\">\n                <a-form-item label=\"文章标题\" :validate-status=\"$validate.title ? 'error' : ''\"\n                  :help=\"$validate.title\">\n                  <a-input v-model=\"viewInfo.title\" @change=\"initValidate('title')\"\n                    placeholder=\"必填，请输入文章标题\" />\n                </a-form-item>\n                <a-form-item label=\"发布站点\">\n                  <a-input v-model=\"viewInfo.psite\" placeholder=\"非必填，该文章的发布站点名称\" />\n                </a-form-item>\n                <a-form-item label=\"摘要\" :validate-status=\"$validate.remark ? 'error' : ''\"\n                  :help=\"$validate.remark\">\n                  <a-input type=\"textarea\" v-model=\"viewInfo.remark\"\n                    @change=\"initValidate('remark')\" placeholder=\"必填，请输入文章摘要\" />\n                </a-form-item>\n                <a-form-item label=\"选择图片\">\n                  <ImgUpload style=\"height:132px\" class=\"set-style\" @change=\"handleUploadChange\"\n                    :default-url=\"viewInfo.posterUrl\" tip=\"图片尺寸：728*400，支持png、jpg、gif\">\n                  </ImgUpload>\n                </a-form-item>\n                <a-form-item label=\"发布时间\">\n                  <a-date-picker v-model=\"viewInfo.ptime\" />\n                </a-form-item>\n                <a-form-item label=\"站点\">\n                  <a-radio-group v-model=\"viewInfo.isJgLink\" button-style=\"solid\">\n                    <a-radio-button :value=\"1\">\n                      极光本站\n                    </a-radio-button>\n                    <a-radio-button :value=\"0\">\n                      外部链接\n                    </a-radio-button>\n                  </a-radio-group>\n                </a-form-item>\n                <a-form-item label=\"内容\" v-show=\"viewInfo.isJgLink\" style=\"z-index:1\">\n                  <div id=\"tipsEditor\"></div>\n                </a-form-item>\n                <a-form-item label=\"外链地址\" v-show=\"!viewInfo.isJgLink\"\n                  :validate-status=\"$validate.externalUrl ? 'error' : ''\"\n                  :help=\"$validate.externalUrl\">\n                  <a-input v-model=\"viewInfo.externalUrl\" @change=\"initValidate('externalUrl')\"\n                    placeholder=\"必填，请输入外链地址\" />\n                </a-form-item>\n              </a-form>\n            </div>\n            <div class=\"content-box seo-content\"\n              v-show=\"stepsData.steps[stepsData.current].content === 'seo-content'\">\n              <a-form :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 15 }\" class=\"form\">\n                <a-form-item label=\"标题\" :validate-status=\"$seoValidate.title ? 'error' : ''\"\n                  :help=\"$seoValidate.title\">\n                  <a-input v-model=\"seoInfo.title\" :maxLength=\"lang==='en' ? 80 : 40\"\n                    @change=\"initSeoValidate('title')\" placeholder=\"必填，用于搜索引擎优化\" />\n                  <inputLmitTip :limit=\"lang==='en' ? 80 : 40\" :text=\"seoInfo.title\">\n                  </inputLmitTip>\n                </a-form-item>\n                <a-form-item label=\"关键字\" :validate-status=\"$seoValidate.keyword ? 'error' : ''\"\n                  :help=\"$seoValidate.keyword\">\n                  <a-input v-model=\"seoInfo.keyword\" :maxLength=\"lang==='en' ? 80 : 40\"\n                    @change=\"initSeoValidate('keyword')\" placeholder=\"必填，用于搜索引擎优化\" />\n                  <inputLmitTip :limit=\"lang==='en' ? 80 : 40\" :text=\"seoInfo.keyword\">\n                  </inputLmitTip>\n                </a-form-item>\n                <a-form-item label=\"描述\" :validate-status=\"$seoValidate.description ? 'error' : ''\"\n                  :help=\"$seoValidate.description\">\n                  <a-input v-model=\"seoInfo.description\" :maxLength=\"lang==='en' ? 150 : 75\"\n                    @change=\"initSeoValidate('description')\" placeholder=\"必填，用于搜索引擎优化\" />\n                  <inputLmitTip :limit=\"lang==='en' ? 150 : 75\" :text=\"seoInfo.description\">\n                  </inputLmitTip>\n                </a-form-item>\n              </a-form>\n            </div>\n          </div>\n          <a-row class=\"steps-action\">\n            <a-col :offset=\"5\">\n              <a-button v-show=\"stepsData.current < stepsData.steps.length - 1\" type=\"primary\"\n                @click=\"next\">\n                下一步\n              </a-button>\n              <a-button v-show=\"stepsData.current > 0\" @click=\"prev\">\n                上一步\n              </a-button>\n              <a-button v-show=\"stepsData.current === stepsData.steps.length - 1\" type=\"primary\"\n                style=\"margin-left: 12px\" @click=\"handlePutIt\">\n                发布\n              </a-button>\n            </a-col>\n          </a-row>\n        </a-card>\n      </div>\n    </layout-base>\n  </div>\n</template>\n\n<script>\nimport { LayoutBase } from '@jg/via-ui';\nimport { reactive, toRefs, onMounted, onBeforeUnmount, ref, watch } from '@vue/composition-api';\nimport { editFormValidate, seoFormValidate, createEditor } from './service';\nimport { message, Modal } from 'ant-design-vue';\nimport moment from 'moment';\nimport { getToken } from '@/utils/auth';\nimport {\n  previewTipsInfo,\n  saveTipsInfo,\n  fetchModifyTipsInfo,\n  updateTipsStatus,\n  deleteTip,\n} from '@/api/index';\n\nimport ImgUpload from '@/components/ImgUpload';\nimport inputLmitTip from '@/components/InputLmitTip';\n\nexport default {\n  components: { LayoutBase, ImgUpload, inputLmitTip },\n  name: 'tips-edit',\n  setup(_, { root }) {\n    let editor;\n    const token = getToken();\n    const isEdit = ref(!!root.$route.params.id);\n    const viewInfo = reactive({\n      content: '',\n      externalUrl: '',\n      isJgLink: 1,\n      keyword: '',\n      picUrl: '',\n      posterUrl: '',\n      psite: '',\n      ptime: moment(),\n      remark: '',\n      title: '',\n    });\n    const seoInfo = reactive({\n      title: '',\n      keyword: '',\n      description: '',\n    });\n    const stepsData = reactive({\n      current: 0,\n      steps: [\n        {\n          title: '编辑内容',\n          content: 'edit-content',\n        },\n        {\n          title: 'seo设置',\n          content: 'seo-content',\n        },\n      ],\n    });\n    const data = reactive({\n      lang: 'zh',\n      title: isEdit.value ? '编辑极光小知识' : '创建极光小知识',\n      isSaved: isEdit.value,\n      id: root.$route.params.id,\n      crumbs: [\n        {\n          path: '',\n          value: '官网管理',\n        },\n        {\n          path: '/docs/jtips/list',\n          value: '极光小知识',\n        },\n        {\n          path: '',\n          value: '中文',\n        },\n        {\n          path: '',\n          value: isEdit.value ? '编辑极光小知识' : '创建极光小知识',\n        },\n      ],\n      originInfo: {},\n      uploadLoading: false,\n      saveLoading: false,\n      previewLoading: false,\n      uploadHeaders: {\n        Authorization: 'sessionId=' + token,\n      },\n    });\n\n    watch(\n      () => root.$route,\n      newVal => {\n        data.lang = newVal.params.lang === 'zh' ? 'zh' : 'en';\n        data.crumbs[1].path = data.crumbs[1].path + '/' + data.lang;\n        data.lang === 'zh' ? (data.crumbs[2].value = '中文') : (data.crumbs[2].value = '英文');\n      },\n    );\n    function handleUploadChange(url) {\n      viewInfo.posterUrl = url;\n    }\n\n    const { $validate, initValidate } = editFormValidate(viewInfo);\n    const { $seoValidate, initSeoValidate } = seoFormValidate(seoInfo);\n\n    function transfedPostJson() {\n      const postJson = {\n        ...viewInfo,\n        seoTitle: seoInfo.title,\n        seoKeyWords: seoInfo.keyword,\n        seoDescription: seoInfo.description,\n        isJgLink: !!viewInfo.isJgLink,\n        ptime: viewInfo.ptime.format('YYYY-MM-DD'),\n        mediaType: 'KNOWLEDGE',\n      };\n      if (data.id && data.id !== 'null') {\n        postJson.id = Number(data.id);\n      }\n      postJson.languageType = data.lang === 'zh' ? 'CHINESE' : 'ENGLISH';\n\n      return postJson;\n    }\n\n    function checkFormError() {\n      let validatedError = false;\n      viewInfo.content = editor ? editor.txt.html() : '';\n      initValidate('title');\n      initValidate('remark');\n      initValidate('externalUrl');\n\n      Object.keys($validate).forEach(key => {\n        if ($validate[key]) {\n          validatedError = true;\n        }\n      });\n\n      if (validatedError) {\n        stepsData.current = 0;\n        return false;\n      }\n      if (viewInfo.isJgLink && !viewInfo.content) {\n        message.error('新闻内容不能为空');\n        return false;\n      }\n\n      return true;\n    }\n    function checkSeoFormError() {\n      let validatedError = false;\n      initSeoValidate('title');\n      initSeoValidate('keyword');\n      initSeoValidate('description');\n\n      Object.keys($seoValidate).forEach(key => {\n        if ($seoValidate[key]) {\n          validatedError = true;\n        }\n      });\n\n      if (validatedError) {\n        stepsData.current = 1;\n        return false;\n      }\n\n      return true;\n    }\n\n    function diffOriginInfo(info) {\n      const keys = Object.keys(info);\n      for (let i = 0; i < keys.length; i++) {\n        if (info[keys[i]] !== data.originInfo[keys[i]]) return true;\n      }\n      return false;\n    }\n\n    function handleSave() {\n      if (checkFormError() && checkSeoFormError()) {\n        data.saveLoading = true;\n        const postJson = transfedPostJson();\n        saveTipsInfo(postJson)\n          .then(res => {\n            if (res.code === 2000 && res.message) {\n              data.id = res.message;\n              data.originInfo = postJson;\n              data.originInfo.id = Number(data.id);\n              data.isSaved = true;\n              message.success('保存成功');\n            }\n          })\n          .finally(() => {\n            data.saveLoading = false;\n          });\n      }\n    }\n\n    function handlePreview() {\n      if (checkFormError() && checkSeoFormError()) {\n        const postJson = transfedPostJson();\n        if (!data.isSaved || diffOriginInfo(postJson)) {\n          Modal.error({\n            title: '提示',\n            content: '请先保存后预览或发布~',\n          });\n          return;\n        }\n        data.previewLoading = true;\n        previewTipsInfo(postJson)\n          .then(res => {\n            // eslint-disable-next-line eqeqeq\n            if (res.code == 2000 && res.message) {\n              window.open(res.message);\n            }\n          })\n          .finally(() => {\n            data.previewLoading = false;\n          });\n      }\n    }\n\n    function handlePutIt() {\n      if (checkFormError() && checkSeoFormError()) {\n        const postJson = transfedPostJson();\n        if (!data.isSaved || diffOriginInfo(postJson)) {\n          Modal.error({\n            title: '提示',\n            content: '请先保存后预览或发布~',\n          });\n          return;\n        }\n\n        Modal.confirm({\n          title: '提示',\n          content: '确认发布该文章？',\n          onOk: () =>\n            updateTipsStatus({\n              pstatus: 1,\n              id: data.id,\n            }).then(() => {\n              message.success('发布成功');\n              root.$router.push('/docs/jtips/list/' + data.lang);\n            }),\n        });\n      }\n    }\n\n    function handleDelete() {\n      Modal.confirm({\n        title: '确认要删除这条信息吗？',\n        content: '您确认要删除这条信息吗，删除后不可恢复',\n        onOk: () =>\n          deleteTip(data.id).then(() => {\n            message.success('删除成功');\n            root.$router.go(-1);\n          }),\n      });\n    }\n    function next() {\n      if (checkFormError()) {\n        stepsData.current++;\n      }\n    }\n    function prev() {\n      stepsData.current--;\n    }\n    function onStepsChange(current) {\n      if (checkFormError()) {\n        stepsData.current = current;\n      }\n    }\n\n    onMounted(() => {\n      editor = createEditor('#tipsEditor');\n      if (isEdit.value) {\n        fetchModifyTipsInfo(data.id).then(res => {\n          viewInfo.content = res.content;\n          viewInfo.title = res.title;\n          viewInfo.remark = res.remark;\n          viewInfo.posterUrl = res.posterUrl || '';\n          viewInfo.keyword = res.keyword || '';\n          viewInfo.picUrl = res.picUrl || '';\n          viewInfo.psite = res.psite || '';\n          viewInfo.isJgLink = res.isJgLink ? 1 : 0;\n          viewInfo.ptime = moment(res.ptime);\n          viewInfo.externalUrl = res.externalUrl || '';\n          seoInfo.title = res.seoTitle || '';\n          seoInfo.keyword = res.seoKeyWords || '';\n          seoInfo.description = res.seoDescription || '';\n          data.lang = res.languageType === 'ENGLISH' ? 'en' : 'zh';\n          data.originInfo = res;\n          data.originInfo.mediaType = 'KNOWLEDGE';\n          data.originInfo.ptime = moment(res.ptime).format('YYYY-MM-DD');\n          data.originInfo.id = Number(data.id);\n          data.originInfo.languageType =\n            res.languageType ?? data.lang === 'zh' ? 'CHINESE' : 'ENGLISH';\n          editor.txt.html(res.content);\n        });\n      }\n    });\n\n    onBeforeUnmount(() => {\n      editor && editor.destroy();\n      editor = null;\n    });\n\n    return {\n      ...toRefs(data),\n      isEdit,\n      viewInfo,\n      $validate,\n      initValidate,\n      seoInfo,\n      $seoValidate,\n      initSeoValidate,\n      handleUploadChange,\n      handlePreview,\n      handleSave,\n      handlePutIt,\n      handleDelete,\n      stepsData,\n      prev,\n      next,\n      onStepsChange,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.steps-wrapper {\n  padding: 20px 0 40px;\n  width: 500px;\n  margin: 0 auto;\n}\n.form {\n  max-width: 1200px;\n  margin: 0 auto;\n  &-title {\n    text-align: center;\n    button {\n      margin-right: 12px;\n    }\n  }\n}\n.form-uploader {\n  /deep/ & > div {\n    width: 347px;\n    height: 171px;\n    overflow: hidden;\n    img {\n      max-width: 100%;\n      max-height: 100%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=286d8486&scoped=true&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&id=286d8486&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"286d8486\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}